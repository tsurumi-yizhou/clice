import{_ as e,c as i,o as a,ae as t}from"./chunks/framework.l7bN90nj.js";const k=JSON.parse('{"title":"Test et Débogage","description":"","frontmatter":{},"headers":[],"relativePath":"fr/dev/test-and-debug.md","filePath":"fr/dev/test-and-debug.md"}'),n={name:"fr/dev/test-and-debug.md"};function l(p,s,o,h,c,d){return a(),i("div",null,[...s[0]||(s[0]=[t(`<h1 id="test-et-debogage" tabindex="-1">Test et Débogage <a class="header-anchor" href="#test-et-debogage" aria-label="Permalink to &quot;Test et Débogage&quot;">​</a></h1><h2 id="executer-les-tests" tabindex="-1">Exécuter les Tests <a class="header-anchor" href="#executer-les-tests" aria-label="Permalink to &quot;Exécuter les Tests&quot;">​</a></h2><p>clice possède deux types de tests : les tests unitaires et les tests d&#39;intégration.</p><ul><li>Exécuter les tests unitaires</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./build/bin/unit_tests</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test-dir=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./tests/data&quot;</span></span></code></pre></div><ul><li>Exécuter les tests d&#39;intégration</li></ul><p>Nous utilisons pytest pour exécuter les tests d&#39;intégration. Veuillez vous référer à <code>pyproject.toml</code> pour installer les bibliothèques Python requises.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --log-cli-level=INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests/integration</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --executable=./build/bin/clice</span></span></code></pre></div><p>Si vous utilisez xmake comme système de construction, vous pouvez lancer les tests directement avec xmake :</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unit_tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> integration_tests/default</span></span></code></pre></div><h2 id="debogage" tabindex="-1">Débogage <a class="header-anchor" href="#debogage" aria-label="Permalink to &quot;Débogage&quot;">​</a></h2><p>Si vous souhaitez attacher un débogueur à clice, il est recommandé de démarrer d&#39;abord clice en mode socket de manière indépendante, puis d&#39;y connecter le client.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./build/bin/clice</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=socket</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=50051</span></span></code></pre></div><p>Une fois le serveur démarré, vous pouvez connecter un client au serveur de deux manières :</p><ul><li>Se connecter en lançant un test spécifique avec pytest</li></ul><p>Vous pouvez lancer un seul cas de test d&#39;intégration pour vous connecter à une instance clice en cours d&#39;exécution. C&#39;est très utile pour reproduire et déboguer des scénarios spécifiques.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --log-cli-level=INFO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests/integration/test_file_operation.py::test_did_open</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=socket</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=50051</span></span></code></pre></div><ul><li>Utiliser VS Code pour des tests pratiques</li></ul><p>Vous pouvez également vous connecter à un service clice en cours d&#39;exécution en configurant l&#39;extension clice-vscode, ce qui vous permet de déboguer dans un scénario d&#39;utilisation réel.</p><ol><li><p>Téléchargez l&#39;extension <a href="https://marketplace.visualstudio.com/items?itemName=ykiko.clice-vscode" target="_blank" rel="noreferrer">clice-vscode</a> depuis le Marketplace.</p></li><li><p>Configurez <code>settings.json</code> : Créez un fichier <code>.vscode/settings.json</code> dans le répertoire racine de votre projet et ajoutez le contenu suivant :</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Pointez vers le binaire clice que vous avez téléchargé.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clice.executable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/chemin/vers/votre/exécutable/clice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Activez le mode socket.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clice.mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clice.port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50051</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Optionnel : Définissez ceci sur une chaîne vide pour désactiver clangd.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clangd.path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>Recharger la fenêtre : Après avoir modifié la configuration, exécutez la commande <code>Developer: Reload Window</code> dans VS Code pour que les paramètres prennent effet. L&#39;extension se connectera automatiquement à l&#39;instance clice écoutant sur le port 50051.</p></li></ol><p>Si vous avez besoin de modifier ou de déboguer l&#39;extension clice-vscode elle-même, suivez ces étapes :</p><ol><li><p>Cloner et installer les dépendances :</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/clice-io/clice-vscode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clice-vscode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div></li><li><p>Ouvrir le projet d&#39;extension avec VS Code : Ouvrez le dossier <code>clice-vscode</code> dans une nouvelle fenêtre VS Code.</p></li><li><p>Créer une configuration de débogage : Dans le projet <code>clice-vscode</code>, créez également un fichier <code>.vscode/settings.json</code> avec le même contenu que ci-dessus.</p></li><li><p>Appuyez sur <code>F5</code>. Cela lancera une fenêtre [Extension Development Host]. Il s&#39;agit d&#39;une nouvelle fenêtre VS Code avec le code de votre extension clice-vscode locale chargé. Ouvrez votre projet C++ dans cette nouvelle fenêtre, et elle devrait se connecter automatiquement à clice.</p></li></ol>`,22)])])}const u=e(n,[["render",l]]);export{k as __pageData,u as default};
